{% extends 'shop/base.html' %}
{% load static %}
{% load crispy_forms_tags %}
{% load humanize %}

{% block headerscript %}

{% endblock headerscript %}
{% block content %}


    <section id="page-title">

        <div class="container clearfix">
            <h1>Checkout</h1>
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="#">Home</a></li>
                <li class="breadcrumb-item"><a href="#">Shop</a></li>
                <li class="breadcrumb-item active" aria-current="page">Checkout</li>
            </ol>
        </div>

    </section>

    <section id="content">
        <div class="content-wrap">
            <div class="container clearfix">

                <div class="row col-mb-50 gutter-50">
                    <div class="col-lg-12">

                        {% include "partials/_messages.html" %}
                    </div>
                </div>
                <div class="row col-mb-50 gutter-50">
                    {% if session_cart.count %}
                        <div class="col-lg-6">
                            <h3>Shipping Address</h3>

                            <!-- Large modal -->
                            <button class="btn btn-primary" data-toggle="modal" data-target="#AddressBookModal">
                                <i class="icon-address-book"></i>  Address Book
                            </button>
                            <form id="shipping-form" name="shipping-form" class="row mb-0"
                                  action="{% url 'store:checkout' %}" method="post">
                                {% csrf_token %}
                                <div class="w-100"></div>

                                <div class="col-md-6 form-group">
                                    <label for="shipping-form-name">Name:</label>
                                    {{ form.name }}
                                </div>

                                <div class="w-100"></div>

                                <div class="col-md-6 form-group">
                                    <label for="shipping-form-lname">Phone:</label>
                                    {{ form.phone }}
                                </div>

                                <div class="w-100"></div>

                                <div class="col-md-6 form-group">
                                    <label for="shipping-form-lname">Email:</label>
                                    {{ form.email }}
                                </div>

                                <div class="w-100"></div>

                                <div class="col-6 form-group">
                                    <label for="shipping-form-lname">Postcode:</label>
                                    {{ form.postcode }}
                                </div>


                                <div class="col-6 form-group">
                                    <label for="shipping-form-companyname">State:</label>
                                    {{ form.state }}
                                </div>

                                <div class="w-100"></div>

                                <div class="col-6 form-group">
                                    <label for="shipping-form-address">Town:</label>
                                    {{ form.town }}
                                </div>


                                <div class="col-6 form-group">
                                    <label for="shipping-form-address">Street:</label>
                                    {{ form.street }}
                                </div>

                                <div class="w-100"></div>
                                <div class="col-12 form-group">
                                    <label for="shipping-form-city">Address Details:</label>
                                    {{ form.address_1 }}
                                </div>
                                <div class="col-12 form-group">
                                    {{ form.address_2 }}
                                </div>

                                <div class="col-12 form-group">
                                    <label for="shipping-form-message">Notes <small>*</small></label>
                                    <textarea class="sm-form-control" id="shipping-form-message"
                                              name="shipping-form-message" rows="6" cols="30"></textarea>
                                </div>

                                <div class="col-12 form-group">

                                    <button class="button button-3d float-right" type="submit">Place Order</button>
                                </div>

                            </form>
                        </div>
                        <div class="col-lg-6">
                            <h4>Your Orders</h4>
                            <div id="cart">
                                <cart cart_mode="checkout"></cart>
                            </div>
                        </div>
                    {% else %}
                        <div class="col-lg-12">
                            <div class="promo promo-border text-center p-4 p-md-5 mb-5">
                                <div class="row align-items-center">
                                    <div class="col-12">
                                        <h3>You have <span class="text-danger">no</span> cart to checkout</h3>
                                        <span>Try to put something to your shopping Cart!</span>
                                    </div>
                                    <div class="col-12 mt-4">
                                        <a href="{% url 'store:home' %}" class="btn btn-lg btn-danger">Start
                                            Shopping!</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </section>


    <!-- Modal -->
    <div class="modal fade" id="AddressBookModal" tabindex="-1" role="dialog" aria-labelledby="AddressBookModal"
         aria-hidden="true">

        <div class="modal-dialog">
            <div class="modal-body">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4 class="modal-title" id="myModalLabel">My Address Book</h4>
                        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
                    </div>
                    <div class="modal-body" id="shippingaddressbook">
                        <Shippingaddress></Shippingaddress>

                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

{% endblock content %}

{% block footerscript_last %}
    <script src="{% static 'js/postcode_auto.js' %}"></script>
{#    <script src="{% static 'js/addressbook.js' %}"></script>#}

{% endblock footerscript_last %}